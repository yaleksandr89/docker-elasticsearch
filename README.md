# Global Elasticsearch Stack

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Å—Ç–µ–∫ `Elasticsearch + analysis-icu + Kibana` —Å –æ–±—Ä–∞—Ç–Ω—ã–º –ø—Ä–æ–∫—Å–∏ `Nginx` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞.

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker –∏ Docker Compose
- 4+ GB —Å–≤–æ–±–æ–¥–Ω–æ–π –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏
- –ü–æ—Ä—Ç 8080 —Å–≤–æ–±–æ–¥–µ–Ω –Ω–∞ —Ö–æ—Å—Ç–µ

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ docker-configs
‚îÇ   ‚îú‚îÄ‚îÄ elasticsearch
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ elasticsearch.yml
‚îÇ   ‚îú‚îÄ‚îÄ kibana
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ kibana.yml
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ wait-for-elastic.sh
‚îÇ   ‚îî‚îÄ‚îÄ nginx
‚îÇ       ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ       ‚îî‚îÄ‚îÄ default.conf.template
‚îî‚îÄ‚îÄ data
    ‚îú‚îÄ‚îÄ elasticsearch
    ‚îî‚îÄ‚îÄ kibana
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è       | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é         | –û–ø–∏—Å–∞–Ω–∏–µ                     |
| ---------------- | -------------------- | ---------------------------- |
| ELASTIC_VERSION  | 6.8.0                | –í–µ—Ä—Å–∏—è Elasticsearch         |
| KIBANA_VERSION   | 6.8.0                | –í–µ—Ä—Å–∏—è Kibana                |
| NGINX_PORT       | 8080                 | –ü–æ—Ä—Ç –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ Nginx |
| ELASTIC_DATA_DIR | ./data/elasticsearch | –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–∞–Ω–Ω—ã—Ö Elastic     |

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- Elasticsearch –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
    - Single-node –∫–ª–∞—Å—Ç–µ—Ä
    - –í—ã–¥–µ–ª–µ–Ω–æ 1GB RAM
    - –ü–ª–∞–≥–∏–Ω analysis-icu –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- Kibana:
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Elasticsearch
    - –ù–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ Nginx

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/yourusername/global-elasticsearch.git
cd global-elasticsearch
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏:

```ini
# –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
NGINX_PORT=8080
ELASTIC_DATA_DIR=./data/elasticsearch
KIBANA_DATA_DIR=./data/kibana
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose up -d --build
```

## ‚ö†Ô∏è –†–µ—à–µ–Ω–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±—Ä–∞–∑–æ–≤

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –æ—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ (_–ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ_):

```bash
# –°–∫–∞—á–∞–π—Ç–µ –æ–±—Ä–∞–∑—ã –≤—Ä—É—á–Ω—É—é
docker pull docker.elastic.co/elasticsearch/elasticsearch:6.8.0
docker pull docker.elastic.co/kibana/kibana:6.8.0

# –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Å–±–æ—Ä–∫—É
docker-compose build
```

## üîå –î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º

–ß–µ—Ä–µ–∑ Nginx –ø—Ä–æ–∫—Å–∏:

* Kibana: http://kibana.local:8080
* Elasticsearch: http://elastic.local:8080

**–ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ–ø–∏—Å–∞—Ç—å –¥–æ–º–µ–Ω—ã**:

* –î–ª—è Windows: `C:\Windows\System32\drivers\etc\hosts`
* –î–ª—è Linux: `/etc/hosts`

–ü—Ä–∏–º–µ—Ä: 

```
127.0.0.1    elastic.local
127.0.0.1    kibana.local
```